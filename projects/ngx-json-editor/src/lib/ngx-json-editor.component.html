<div class="card" style="width: 900px;">
	<div class="card-header pb-3">
		<div class="flex items-center justify-between">
			<div class="card-title text-lg font-semibold">Editor JSON</div>
			<div class="flex items-center gap-2">
				<span class="badge" [ngClass]="isValid ? 'badge-default' : 'badge-destructive'">{{ isValid ? 'Válido' : 'Error'
					}}</span>
			</div>
		</div>
		<ngx-json-editor-controls [config]="config" (format)="formatJson()" (minify)="minifyJson()"
															(sort)="sortKeysAlphabetically()" (toggleSearch)="toggleSearch()"
															(copy)="copyToClipboard()" (download)="downloadJson()" (reset)="resetEditor()"
															(load)="handleFileUpload($event)">
		</ngx-json-editor-controls>
		<ngx-json-search [show]="showSearch" [searchTerm]="searchTerm" [totalMatches]="totalMatches"
										 [currentMatchIndex]="currentMatchIndex" (searchTermChange)="onSearchTermChange($event)"
										 (next)="goToNextMatch()" (prev)="goToPreviousMatch()" (close)="closeSearch()"></ngx-json-search>
	</div>
	<div class="card-content space-y-3">
		<div class="relative bg-background border rounded-md">
			<div *ngIf="searchTerm" #highlightOverlay
					 class="absolute inset-0 pointer-events-none whitespace-pre-wrap break-words overflow-hidden z-10 editor-layer"
					 [innerHTML]="highlightSearchTerm(jsonText, searchTerm, currentMatchIndex)"
					 [ngStyle]="{color: 'transparent', background: 'transparent'}">
			</div>
			<textarea #jsonArea [(ngModel)]="jsonText" (ngModelChange)="onJsonTextChange($event)"
								(keydown)="handleKeyDown($event)" (scroll)="syncScroll($event)" [placeholder]="placeholder"
								class="editor-layer focus:outline-none focus:ring-2 focus:ring-ring relative bg-transparent"
								[ngClass]="isValid ? 'text-foreground' : 'text-foreground bg-destructive-5'" [ngStyle]="{zIndex: 5}"
								spellcheck="false"></textarea>
		</div>
		<div *ngIf="searchTerm" class="text-xs text-muted-foreground">
			{{ getSearchMatches() }}
		</div>
		<div class="flex justify-between text-xs text-muted-foreground">
			<span>Líneas: {{ jsonText.split('\n').length }}</span>
			<span>Caracteres: {{ jsonText.length }}</span>
		</div>
	</div>
</div>